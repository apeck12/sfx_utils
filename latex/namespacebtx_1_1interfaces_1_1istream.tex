\hypertarget{namespacebtx_1_1interfaces_1_1istream}{}\doxysection{btx.\+interfaces.\+istream Namespace Reference}
\label{namespacebtx_1_1interfaces_1_1istream}\index{btx.interfaces.istream@{btx.interfaces.istream}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classbtx_1_1interfaces_1_1istream_1_1StreamInterface}{Stream\+Interface}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespacebtx_1_1interfaces_1_1istream_a73404765514f92d98ec2e1a83e65fdce}{read\+\_\+cell\+\_\+file}} (cell\+\_\+file)
\begin{DoxyCompactList}\small\item\em Extract cell parameters from a Cryst\+FEL cell file. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacebtx_1_1interfaces_1_1istream_af77500f374d8395356e6b98f95500164}{write\+\_\+cell\+\_\+file}} (cell, output\+\_\+file, \mbox{\hyperlink{namespacebtx_1_1interfaces_1_1istream_a5cf43fa37190cf28f0ac03cda28e9fe9}{input\+\_\+file}}=None)
\begin{DoxyCompactList}\small\item\em Write a new Cryst\+FEL-\/style cell file with the same lattice type as the input file (or primitive triclinic if none given) and the cell parameters changed to input cell. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacebtx_1_1interfaces_1_1istream_aa60e17985a692acb8ed9ac1a8f6369b4}{cluster\+\_\+cell\+\_\+params}} (cell, out\+\_\+clusters, out\+\_\+cell, in\+\_\+cell=None, eps=5, min\+\_\+samples=5)
\begin{DoxyCompactList}\small\item\em Apply DBScan clustering to unit cell parameters and write the most prevalent unit cell parameters to a Cryst\+FEL cell file. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacebtx_1_1interfaces_1_1istream_ac18ae253c750862dbd17162181c4de9e}{launch\+\_\+stream\+\_\+analysis}} (in\+\_\+stream, out\+\_\+stream, fig\+\_\+dir, tmp\+\_\+exe, queue, ncores, cell\+\_\+only=False, \mbox{\hyperlink{namespacebtx_1_1interfaces_1_1istream_a547dd9d2c0e2ba1f2926378defe59ea7}{cell\+\_\+out}}=None, cell\+\_\+ref=None, addl\+\_\+command=None)
\begin{DoxyCompactList}\small\item\em Launch stream analysis task using i\+Scheduler. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacebtx_1_1interfaces_1_1istream_a204d7792d26952df70859d0c6d759d8f}{parse\+\_\+input}} ()
\begin{DoxyCompactList}\small\item\em For command line use \#\#\#\#. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespacebtx_1_1interfaces_1_1istream_a37d9c84ed59c3d3cf2d59e820edc8072}{params}} = \mbox{\hyperlink{namespacebtx_1_1interfaces_1_1istream_a204d7792d26952df70859d0c6d759d8f}{parse\+\_\+input}}()
\item 
\mbox{\hyperlink{namespacebtx_1_1interfaces_1_1istream_a83d8014c2cbfaa35d92895c952b7588f}{st}} = \mbox{\hyperlink{classbtx_1_1interfaces_1_1istream_1_1StreamInterface}{Stream\+Interface}}(input\+\_\+files=glob.\+glob(params.\+inputs), cell\+\_\+only=params.\+cell\+\_\+only)
\item 
\mbox{\hyperlink{namespacebtx_1_1interfaces_1_1istream_a3f37f557269e7005f023b112767804dc}{output}}
\item 
\mbox{\hyperlink{namespacebtx_1_1interfaces_1_1istream_a0b9d9d1fecb8d9022572317cf3aa2853}{tag}}
\item 
\mbox{\hyperlink{namespacebtx_1_1interfaces_1_1istream_a547dd9d2c0e2ba1f2926378defe59ea7}{cell\+\_\+out}}
\item 
\mbox{\hyperlink{namespacebtx_1_1interfaces_1_1istream_a5cf43fa37190cf28f0ac03cda28e9fe9}{input\+\_\+file}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacebtx_1_1interfaces_1_1istream_aa60e17985a692acb8ed9ac1a8f6369b4}\label{namespacebtx_1_1interfaces_1_1istream_aa60e17985a692acb8ed9ac1a8f6369b4}} 
\index{btx.interfaces.istream@{btx.interfaces.istream}!cluster\_cell\_params@{cluster\_cell\_params}}
\index{cluster\_cell\_params@{cluster\_cell\_params}!btx.interfaces.istream@{btx.interfaces.istream}}
\doxysubsubsection{\texorpdfstring{cluster\_cell\_params()}{cluster\_cell\_params()}}
{\footnotesize\ttfamily def btx.\+interfaces.\+istream.\+cluster\+\_\+cell\+\_\+params (\begin{DoxyParamCaption}\item[{}]{cell,  }\item[{}]{out\+\_\+clusters,  }\item[{}]{out\+\_\+cell,  }\item[{}]{in\+\_\+cell = {\ttfamily None},  }\item[{}]{eps = {\ttfamily 5},  }\item[{}]{min\+\_\+samples = {\ttfamily 5} }\end{DoxyParamCaption})}



Apply DBScan clustering to unit cell parameters and write the most prevalent unit cell parameters to a Cryst\+FEL cell file. 

Unit cell parameters from all valid clusters are written to a separate file.\hypertarget{namespacebtx_1_1interfaces_1_1istream_autotoc_md83}{}\doxysubsubsection{Parameters}\label{namespacebtx_1_1interfaces_1_1istream_autotoc_md83}
cell \+: numpy.\+ndarray, shape (n\+\_\+crystals, 6) \mbox{[}a,b,c,alpha,beta,gamma\mbox{]} in Angstrom and degrees out\+\_\+clusters \+: str file to write clustering results to out\+\_\+cell \+: str output Cryst\+FEL unit cell file in\+\_\+cell \+: str input Cryst\+FEL unit cell file to copy lattice type from, optional eps \+: float max distance for points to be considered neighbors min\+\_\+samples \+: int minimum number of samples for a cluster to be valid\hypertarget{namespacebtx_1_1interfaces_1_1istream_autotoc_md84}{}\doxysubsubsection{Returns}\label{namespacebtx_1_1interfaces_1_1istream_autotoc_md84}
labels \+: numpy.\+ndarray, shape (n\+\_\+crystals,) cluster labels for input cell array \mbox{\Hypertarget{namespacebtx_1_1interfaces_1_1istream_ac18ae253c750862dbd17162181c4de9e}\label{namespacebtx_1_1interfaces_1_1istream_ac18ae253c750862dbd17162181c4de9e}} 
\index{btx.interfaces.istream@{btx.interfaces.istream}!launch\_stream\_analysis@{launch\_stream\_analysis}}
\index{launch\_stream\_analysis@{launch\_stream\_analysis}!btx.interfaces.istream@{btx.interfaces.istream}}
\doxysubsubsection{\texorpdfstring{launch\_stream\_analysis()}{launch\_stream\_analysis()}}
{\footnotesize\ttfamily def btx.\+interfaces.\+istream.\+launch\+\_\+stream\+\_\+analysis (\begin{DoxyParamCaption}\item[{}]{in\+\_\+stream,  }\item[{}]{out\+\_\+stream,  }\item[{}]{fig\+\_\+dir,  }\item[{}]{tmp\+\_\+exe,  }\item[{}]{queue,  }\item[{}]{ncores,  }\item[{}]{cell\+\_\+only = {\ttfamily False},  }\item[{}]{cell\+\_\+out = {\ttfamily None},  }\item[{}]{cell\+\_\+ref = {\ttfamily None},  }\item[{}]{addl\+\_\+command = {\ttfamily None} }\end{DoxyParamCaption})}



Launch stream analysis task using i\+Scheduler. 

\hypertarget{namespacebtx_1_1interfaces_1_1istream_autotoc_md85}{}\doxysubsubsection{Parameters}\label{namespacebtx_1_1interfaces_1_1istream_autotoc_md85}
in\+\_\+stream \+: str glob-\/compatible path to input stream file(s) out\+\_\+stream \+: str name of output concatenated stream file fig\+\_\+dir \+: str directory to write peakogram and cell distribution plot to tmp\+\_\+exe \+: str name of temporary executable file queue \+: str queue to submit job to ncores \+: int minimum of number of cores and number of stream files cell\+\_\+only \+: bool if True, do not plot peakogram cell\+\_\+out \+: str output Cryst\+FEL-\/style cell file cell\+\_\+ref \+: str Cryst\+FEL cell file to copy symmetry from addl\+\_\+command \+: str additional command to add to end of job to launch \mbox{\Hypertarget{namespacebtx_1_1interfaces_1_1istream_a204d7792d26952df70859d0c6d759d8f}\label{namespacebtx_1_1interfaces_1_1istream_a204d7792d26952df70859d0c6d759d8f}} 
\index{btx.interfaces.istream@{btx.interfaces.istream}!parse\_input@{parse\_input}}
\index{parse\_input@{parse\_input}!btx.interfaces.istream@{btx.interfaces.istream}}
\doxysubsubsection{\texorpdfstring{parse\_input()}{parse\_input()}}
{\footnotesize\ttfamily def btx.\+interfaces.\+istream.\+parse\+\_\+input (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



For command line use \#\#\#\#. 

Parse command line input. \mbox{\Hypertarget{namespacebtx_1_1interfaces_1_1istream_a73404765514f92d98ec2e1a83e65fdce}\label{namespacebtx_1_1interfaces_1_1istream_a73404765514f92d98ec2e1a83e65fdce}} 
\index{btx.interfaces.istream@{btx.interfaces.istream}!read\_cell\_file@{read\_cell\_file}}
\index{read\_cell\_file@{read\_cell\_file}!btx.interfaces.istream@{btx.interfaces.istream}}
\doxysubsubsection{\texorpdfstring{read\_cell\_file()}{read\_cell\_file()}}
{\footnotesize\ttfamily def btx.\+interfaces.\+istream.\+read\+\_\+cell\+\_\+file (\begin{DoxyParamCaption}\item[{}]{cell\+\_\+file }\end{DoxyParamCaption})}



Extract cell parameters from a Cryst\+FEL cell file. 

\hypertarget{namespacebtx_1_1interfaces_1_1istream_autotoc_md80}{}\doxysubsubsection{Parameters}\label{namespacebtx_1_1interfaces_1_1istream_autotoc_md80}
cell\+\_\+file \+: str Cryst\+FEL cell file\hypertarget{namespacebtx_1_1interfaces_1_1istream_autotoc_md81}{}\doxysubsubsection{Returns}\label{namespacebtx_1_1interfaces_1_1istream_autotoc_md81}
array of cell parameters\+: \mbox{[}a,b,c,alpha,beta,gamma\mbox{]} in Angstrom/degrees \mbox{\Hypertarget{namespacebtx_1_1interfaces_1_1istream_af77500f374d8395356e6b98f95500164}\label{namespacebtx_1_1interfaces_1_1istream_af77500f374d8395356e6b98f95500164}} 
\index{btx.interfaces.istream@{btx.interfaces.istream}!write\_cell\_file@{write\_cell\_file}}
\index{write\_cell\_file@{write\_cell\_file}!btx.interfaces.istream@{btx.interfaces.istream}}
\doxysubsubsection{\texorpdfstring{write\_cell\_file()}{write\_cell\_file()}}
{\footnotesize\ttfamily def btx.\+interfaces.\+istream.\+write\+\_\+cell\+\_\+file (\begin{DoxyParamCaption}\item[{}]{cell,  }\item[{}]{output\+\_\+file,  }\item[{}]{input\+\_\+file = {\ttfamily None} }\end{DoxyParamCaption})}



Write a new Cryst\+FEL-\/style cell file with the same lattice type as the input file (or primitive triclinic if none given) and the cell parameters changed to input cell. 

\hypertarget{namespacebtx_1_1interfaces_1_1istream_autotoc_md82}{}\doxysubsubsection{Parameters}\label{namespacebtx_1_1interfaces_1_1istream_autotoc_md82}
cell \+: np.\+array, 1d unit cell parameters \mbox{[}a,b,c,alpha,beta,gamma\mbox{]}, in Ã…/degrees output\+\_\+file \+: str output Cryst\+FEL unit cell file input\+\_\+file \+: str input Cryst\+FEL unit cell file, optional 

\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{namespacebtx_1_1interfaces_1_1istream_a547dd9d2c0e2ba1f2926378defe59ea7}\label{namespacebtx_1_1interfaces_1_1istream_a547dd9d2c0e2ba1f2926378defe59ea7}} 
\index{btx.interfaces.istream@{btx.interfaces.istream}!cell\_out@{cell\_out}}
\index{cell\_out@{cell\_out}!btx.interfaces.istream@{btx.interfaces.istream}}
\doxysubsubsection{\texorpdfstring{cell\_out}{cell\_out}}
{\footnotesize\ttfamily btx.\+interfaces.\+istream.\+cell\+\_\+out}

\mbox{\Hypertarget{namespacebtx_1_1interfaces_1_1istream_a5cf43fa37190cf28f0ac03cda28e9fe9}\label{namespacebtx_1_1interfaces_1_1istream_a5cf43fa37190cf28f0ac03cda28e9fe9}} 
\index{btx.interfaces.istream@{btx.interfaces.istream}!input\_file@{input\_file}}
\index{input\_file@{input\_file}!btx.interfaces.istream@{btx.interfaces.istream}}
\doxysubsubsection{\texorpdfstring{input\_file}{input\_file}}
{\footnotesize\ttfamily btx.\+interfaces.\+istream.\+input\+\_\+file}

\mbox{\Hypertarget{namespacebtx_1_1interfaces_1_1istream_a3f37f557269e7005f023b112767804dc}\label{namespacebtx_1_1interfaces_1_1istream_a3f37f557269e7005f023b112767804dc}} 
\index{btx.interfaces.istream@{btx.interfaces.istream}!output@{output}}
\index{output@{output}!btx.interfaces.istream@{btx.interfaces.istream}}
\doxysubsubsection{\texorpdfstring{output}{output}}
{\footnotesize\ttfamily btx.\+interfaces.\+istream.\+output}

\mbox{\Hypertarget{namespacebtx_1_1interfaces_1_1istream_a37d9c84ed59c3d3cf2d59e820edc8072}\label{namespacebtx_1_1interfaces_1_1istream_a37d9c84ed59c3d3cf2d59e820edc8072}} 
\index{btx.interfaces.istream@{btx.interfaces.istream}!params@{params}}
\index{params@{params}!btx.interfaces.istream@{btx.interfaces.istream}}
\doxysubsubsection{\texorpdfstring{params}{params}}
{\footnotesize\ttfamily def btx.\+interfaces.\+istream.\+params = \mbox{\hyperlink{namespacebtx_1_1interfaces_1_1istream_a204d7792d26952df70859d0c6d759d8f}{parse\+\_\+input}}()}

\mbox{\Hypertarget{namespacebtx_1_1interfaces_1_1istream_a83d8014c2cbfaa35d92895c952b7588f}\label{namespacebtx_1_1interfaces_1_1istream_a83d8014c2cbfaa35d92895c952b7588f}} 
\index{btx.interfaces.istream@{btx.interfaces.istream}!st@{st}}
\index{st@{st}!btx.interfaces.istream@{btx.interfaces.istream}}
\doxysubsubsection{\texorpdfstring{st}{st}}
{\footnotesize\ttfamily btx.\+interfaces.\+istream.\+st = \mbox{\hyperlink{classbtx_1_1interfaces_1_1istream_1_1StreamInterface}{Stream\+Interface}}(input\+\_\+files=glob.\+glob(params.\+inputs), cell\+\_\+only=params.\+cell\+\_\+only)}

\mbox{\Hypertarget{namespacebtx_1_1interfaces_1_1istream_a0b9d9d1fecb8d9022572317cf3aa2853}\label{namespacebtx_1_1interfaces_1_1istream_a0b9d9d1fecb8d9022572317cf3aa2853}} 
\index{btx.interfaces.istream@{btx.interfaces.istream}!tag@{tag}}
\index{tag@{tag}!btx.interfaces.istream@{btx.interfaces.istream}}
\doxysubsubsection{\texorpdfstring{tag}{tag}}
{\footnotesize\ttfamily btx.\+interfaces.\+istream.\+tag}

